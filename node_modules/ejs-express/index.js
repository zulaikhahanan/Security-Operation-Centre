const express = require('express');
const ejs = require('ejs');
const fs = require('fs');

var __ejs = (route, template) => {
    return function (req, res, next) {
        var result = new RegExp(route).exec(req.path);
        if(result != null)
            res.send(ejs.render(template, {req: req}));
        next();
    }
}

var __ejsf = (route, file) => {
    return __ejs(route, fs.readFileSync(file).toString());
}

module.exports = {ejs: __ejs, ejsFile: __ejsf};